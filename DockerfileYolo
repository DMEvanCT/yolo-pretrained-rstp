FROM python:3.12-slim

# Install dependencies
RUN apt-get update && apt-get install -y git
RUN pip install --upgrade pip && pip install ultralytics boto3 sagemaker
RUN apt-get update && apt-get install ffmpeg libsm6 libxext6  -y

# Copy training script
COPY train.py /opt/ml/code/train.py
COPY yolov11-coco.pt /opt/ml/code/yolov11-coco.pt

# Define SageMaker entry point
ENTRYPOINT ["python", "/opt/ml/code/train.py"]